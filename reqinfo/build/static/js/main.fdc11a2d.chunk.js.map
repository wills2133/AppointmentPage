{"version":3,"sources":["index.js"],"names":["FormItem","Form","Item","App","_this","Object","_home_wills_Projects_appointment_reqinfo_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","_home_wills_Projects_appointment_reqinfo_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_home_wills_Projects_appointment_reqinfo_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","requestAppointments","values","api","userid","axios","get","then","response","unjson","json","data","replace","JSON","parse","error","console","log","setState","loadingOpacity","Modal","info","title","content","respItems","respNum","value","length","i","majorsymptoms","push","getResp","appointments","showAppointment","appointment","styles","textAlign","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","style","padding","antd_lib_card__WEBPACK_IMPORTED_MODULE_13___default","width","sytle","appointfromdate","split","appointtodate","treatmentgoals","listAppointments","className","state","map","key","handleSubmit","e","preventDefault","props","form","validateFields","err","fieldsValue","_home_wills_Projects_appointment_reqinfo_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","inputForm","getFieldDecorator","antd_lib_form__WEBPACK_IMPORTED_MODULE_15___default","onSubmit","assign","labelCol","xs","span","sm","wrapperCol","label","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_19___default","antd_lib_icon__WEBPACK_IMPORTED_MODULE_11___default","type","rules","required","message","antd_lib_input__WEBPACK_IMPORTED_MODULE_9___default","offset","antd_lib_button__WEBPACK_IMPORTED_MODULE_17___default","htmlType","antd_lib_spin__WEBPACK_IMPORTED_MODULE_21___default","opacity","position","React","Component","WrappedForm","create","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.fdc11a2d.chunk.js","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport axios from \"axios\";\n\nimport Input from \"antd/lib/input\";\nimport 'antd/lib/input/style';\nimport Icon from \"antd/lib/icon\";\nimport 'antd/lib/icon/style';\nimport Card from \"antd/lib/card\";\nimport 'antd/lib/card/style';\nimport Form from \"antd/lib/form\";\nimport 'antd/lib/form/style';\nimport Button from \"antd/lib/button\";\nimport 'antd/lib/button/style';\nimport Tooltip from \"antd/lib/tooltip\";\nimport 'antd/lib/tooltip/style';\nimport Spin from \"antd/lib/spin\";\nimport 'antd/lib/spin/style'\nimport Modal from \"antd/lib/modal\";\nimport 'antd/lib/modal/style'\n\nimport \"./styles.css\";\nimport \"antd/dist/antd.css\";\n\nconst FormItem = Form.Item;\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loadingOpacity: 0,\n      getResp: false,\n      appointments: [{\"appointfromdate\":\"T\", \"appointtodate\":\"T\",}],\n    };\n  }\n\n  requestAppointments = (values) => {\n    let api = \"/api/userAppointment/userid/\" + values.userid + \"?userid=\" + values.userid\n    axios.get(api).then(response => {\n      // console.log(\"response\", response.data );\n      let unjson = \"\";\n      let json = {}\n      try{\n        unjson = response.data.replace(/\\\\/g, '')\n        unjson = unjson.replace(/\"{/g, '{')\n        unjson = unjson.replace(/\"}/g, '}')\n        unjson = unjson.replace(/\"\\[/g, '[')\n        unjson = unjson.replace(/\\]\"/g, ']')\n        // console.log(\"unjson\", unjson );\n        json = JSON.parse(unjson);\n      }catch(error){\n        console.log(\"no valid response\", error)\n        this.setState({loadingOpacity:0})\n        Modal.info({\n          title: \"错误信息\",\n          content: \"无用户\"+values.userid+\"预约记录\"\n        });\n        return\n      }\n      // console.log(\"keys\", json );\n      let respItems = [];\n      let respNum = json.value.length;\n      if(respNum){\n        for (let i=0; i < respNum; i++){\n          console.log(\"item.userid1\", json.value[i].majorsymptoms)\n          respItems.push(json.value[i])\n        }\n      }else{\n        console.log(\"item.userid2\", json.value.majorsymptoms)\n        respItems.push(json.value)\n      }\n      this.setState({\n        getResp: true,\n        appointments: respItems,\n      })\n\n    });\n  }\n\n  showAppointment = (appointment) =>{\n    // console.log(\"appointment\", appointment)\n    let styles={\n      textAlign:\"left\",\n    }\n    return(\n      <div style={{ padding:\"5% 5% 0% 5%\" }}>\n        <Card style={{ width: \"100%\"}} >\n          <p sytle={styles}>用户ID: {appointment.userid}</p>\n          <p sytle={styles}>预约日期: {appointment.appointfromdate.split(\"T\")[0]}\n          ~{appointment.appointtodate.split(\"T\")[0]}</p>\n          <p sytle={styles}>症状描述: {appointment.majorsymptoms}</p>\n          <p sytle={styles}>期望疗效: {appointment.treatmentgoals}</p>\n        </Card>\n      </div>\n      )\n    \n  }\n\n  listAppointments = () => {\n    return(\n      <div className=\"App\">\n        {this.state.appointments.map( (appointment, i) =>\n          <div key={i}> {this.showAppointment(appointment)} </div> )}\n      </div>\n      )\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFields((err, fieldsValue) => {\n      if (err) {\n        return;\n      }\n      this.setState({loadingOpacity:1})\n      // Should format date value before submit.\n      const values = {\n        ...fieldsValue,\n      };\n      this.requestAppointments(values);\n    });\n  };\n\n  inputForm = () => {\n    const { getFieldDecorator } = this.props.form;\n    const formItemLayout = {\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 8 }\n      },\n      wrapperCol: {\n        xs: { span: 8 },\n        sm: { span: 8 }, //box width\n      }\n    };\n    const configUserID = { rules: [{ type: \"string\", required: true, message: \"请输入用户ID\" }] };\n    return (\n      <div style={{padding:24}}>\n      <h3 style={{ textAlign: \"center\"}} >预约查询</h3>\n      <Form  onSubmit={this.handleSubmit}>\n        <FormItem {...formItemLayout}\n          label={\n            <span>\n              用户ID&nbsp;\n              <Tooltip title=\"用户注册时分配的ID\">\n                <Icon type=\"question-circle-o\" />\n              </Tooltip>\n            </span>\n          } >\n          {getFieldDecorator(\"userid\", configUserID)(<Input />)}\n        </FormItem>\n\n        <FormItem \n          wrapperCol={{ \n            xs: { span: 24, offset: 10 }, \n            sm: { span: 12, offset: 11 } }} >\n          <Button type=\"primary\" htmlType=\"submit\"> 查询 </Button>\n          <Spin\n            style={{\n              opacity: this.state.loadingOpacity,\n              position: \"relative\",\n              padding: \"7px 0px 0px 15px\"\n            }}\n          />\n        </FormItem>\n      </Form>\n      </div>\n    );\n  }\n\n  render() {\n    if(this.state.getResp){\n      return ( this.listAppointments() );\n    }else{\n      return ( this.inputForm() );\n    }\n    \n  }\n}\nconst WrappedForm = Form.create()(App);\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<WrappedForm />, rootElement);\n"],"sourceRoot":""}